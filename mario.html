<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hop-Only Mario - Fullscreen</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: white;
      height: 100%;
      width: 100%;
    }
    canvas {
      display: block;
      margin: 0 auto;
      image-rendering: pixelated;
    }
  </style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Set canvas size to window size
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const TILE_SIZE = 32;
const GROUND_Y = canvas.height - TILE_SIZE;

const GRAVITY = 0.5;
const JUMP_VELOCITY = -8;
const HOP_SPEED = 3;

const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// Sprites
const marioSprites = {
  idle: "https://www.videogamesprites.net/SuperMarioBros1/Characters/Mario/Mario.gif",
  jump: "https://www.videogamesprites.net/SuperMarioBros1/Characters/Mario/Mario%20-%20Jump.gif"
};
const brickURL = "https://www.videogamesprites.net/SuperMarioBros1/Blocks/Brick.gif";

const images = {
  idle: new Image(),
  jump: new Image(),
  brick: new Image()
};
images.idle.src = marioSprites.idle;
images.jump.src = marioSprites.jump;
images.brick.src = brickURL;

const mario = {
  x: canvas.width / 2,
  y: GROUND_Y - TILE_SIZE,
  width: TILE_SIZE,
  height: TILE_SIZE,
  vx: 0,
  vy: 0,
  onGround: false,
  facing: "right",
  state: "idle"
};

function update() {
  if ((keys["w"] || keys["ArrowUp"] || keys[" "]) && mario.onGround) {
    mario.vy = JUMP_VELOCITY;
    mario.onGround = false;

    if (keys["ArrowLeft"] || keys["a"]) {
      mario.vx = -HOP_SPEED;
      mario.facing = "left";
    } else if (keys["ArrowRight"] || keys["d"]) {
      mario.vx = HOP_SPEED;
      mario.facing = "right";
    } else {
      mario.vx = 0;
    }
  }

  mario.vy += GRAVITY;
  mario.x += mario.vx;
  mario.y += mario.vy;

  // Ground collision
  if (mario.y + mario.height >= GROUND_Y) {
    mario.y = GROUND_Y - mario.height;
    mario.vy = 0;

    // slide when landing
    if (!mario.onGround && mario.vx !== 0) {
      mario.vx *= 0.6;
    } else {
      mario.vx = 0;
    }

    mario.onGround = true;
  } else {
    mario.onGround = false;
  }

  mario.state = mario.onGround ? "idle" : "jump";
}

function drawGround() {
  const tilesAcross = Math.ceil(canvas.width / TILE_SIZE);
  for (let i = 0; i < tilesAcross; i++) {
    ctx.drawImage(images.brick, i * TILE_SIZE, GROUND_Y, TILE_SIZE, TILE_SIZE);
  }
}

function drawMario() {
  const img = mario.state === "jump" ? images.jump : images.idle;

  ctx.save();
  ctx.translate(mario.x + mario.width / 2, mario.y + mario.height / 2);
  if (mario.facing === "left") ctx.scale(-1, 1);
  ctx.drawImage(img, -mario.width / 2, -mario.height / 2, mario.width, mario.height);
  ctx.restore();
}

function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawGround();
  update();
  drawMario();
  requestAnimationFrame(loop);
}

loop();

// Optional: resize canvas when window resizes
window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
