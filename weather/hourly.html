<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather</title>

<style>
/* RESET */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  font-family: Arial, sans-serif;
}

/* BACKGROUND */
.background {
  position: fixed;
  inset: 0;
  z-index: 0;
  transition: background 1s ease;
}

/* DAY SKY */
body.day .background {
  background: linear-gradient(#87CEEB, #d9f2ff);
}

/* NIGHT SKY (VERY DARK BLUE) */
body.night .background {
  background: radial-gradient(circle at top, #020617 0%, #000000 90%);
}

/* SUN */
.sun {
  position: absolute;
  top: 60px;
  left: 60px;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: radial-gradient(circle, #FFD700, #FFA500);
  box-shadow: 0 0 70px rgba(255,215,0,.6);
}

/* MOON */
.moon {
  position: absolute;
  top: 60px;
  right: 80px;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: #f5f3ce;
  box-shadow:
    0 0 25px rgba(255,255,220,.8),
    0 0 60px rgba(255,255,220,.4);
}

/* STARS */
.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  opacity: .8;
  animation: twinkle 2s infinite alternate;
}

@keyframes twinkle {
  from { opacity: .3; }
  to { opacity: 1; }
}

/* SHOOTING STAR */
.shooting-star {
  position: absolute;
  width: 2px;
  height: 120px;
  background: linear-gradient(white, transparent);
  transform: rotate(45deg);
  animation: shoot 1.5s linear forwards;
}

@keyframes shoot {
  from { opacity: 1; transform: translate(0,0) rotate(45deg); }
  to { opacity: 0; transform: translate(600px,600px) rotate(45deg); }
}

/* CLOUDS */
.cloud {
  position: absolute;
  width: 200px;
  height: 60px;
  background: #fff;
  border-radius: 50px;
  opacity: .9;
  animation: moveClouds 60s linear infinite;
}

.cloud::before, .cloud::after {
  content: '';
  position: absolute;
  background: #fff;
  border-radius: 50%;
}

.cloud::before { width: 80px; height: 80px; top: -40px; left: 30px; }
.cloud::after { width: 100px; height: 100px; top: -50px; left: 90px; }

@keyframes moveClouds {
  from { transform: translateX(-300px); }
  to { transform: translateX(120vw); }
}

/* RAIN */
.rain {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.raindrop {
  position: absolute;
  width: 2px;
  height: 100vh;
  background: rgba(0,0,255,.4);
  animation: fall 1s linear infinite;
}

@keyframes fall {
  from { transform: translateY(-100vh); }
  to { transform: translateY(100vh); }
}

/* VISIBILITY RULES (CRITICAL) */
body.day .moon,
body.day .star,
body.day .shooting-star {
  display: none !important;
}

body.day .sun {
  display: block !important;
}

body.night .sun {
  display: none !important;
}

body.night .moon,
body.night .star,
body.night .shooting-star {
  display: block !important;
}

/* CONTENT */
.content {
  position: relative;
  z-index: 5;
  color: white;
  padding: 60px 20px;
}

/* SIDENAV */
.sidenav {
  position: fixed;
  inset: 0;
  background: #111;
  width: 0;
  overflow: hidden;
  transition: .5s;
  z-index: 10;
  padding-top: 60px;
}

.sidenav a {
  display: block;
  padding: 15px;
  color: #ccc;
  text-decoration: none;
  font-size: 22px;
}

.sidenav a:hover { color: white; }

.hamburger {
  font-size: 30px;
  cursor: pointer;
}
</style>
</head>

<body class="day">

<div class="background">
  <div class="sun"></div>
  <div class="moon"></div>

  <!-- Clouds -->
  <div class="cloud" style="top:20%; animation-duration:70s;"></div>
  <div class="cloud" style="top:45%; animation-duration:90s;"></div>
  <div class="cloud" style="top:70%; animation-duration:110s;"></div>

  <!-- Rain -->
  <div class="rain" id="rain"></div>
</div>

<div id="menu" class="sidenav">
  <a href="javascript:void(0)" onclick="closeNav()">Close ✕</a>
  <a href="#">Home</a>
  <a href="#">Forecast</a>
  <a href="#">Radar</a>
</div>

<div class="content">
  <span class="hamburger" onclick="openNav()">☰</span>
  <h1>Hourly Forecast</h1>
  <div id="forecast"></div>
</div>

<script>
/* NAV */
function openNav(){ menu.style.width="100%"; }
function closeNav(){ menu.style.width="0"; }

/* DAY / NIGHT */
function updateDayNight() {
  const hour = new Date().getHours();
  document.body.classList.remove("day","night");

  if (hour >= 18 || hour < 6) {
    document.body.classList.add("night");
  } else {
    document.body.classList.add("day");
  }
}

/* STARS */
function createStars() {
  if (!document.body.classList.contains("night")) return;
  for (let i=0;i<150;i++) {
    const s=document.createElement("div");
    s.className="star";
    s.style.left=Math.random()*100+"%";
    s.style.top=Math.random()*100+"%";
    document.querySelector(".background").appendChild(s);
  }
}

/* SHOOTING STAR */
setInterval(()=>{
  if (!document.body.classList.contains("night")) return;
  const s=document.createElement("div");
  s.className="shooting-star";
  s.style.left=Math.random()*30+"%";
  s.style.top=Math.random()*30+"%";
  document.querySelector(".background").appendChild(s);
  setTimeout(()=>s.remove(),1500);
},15000);

/* RAIN */
function startRain(){
  rain.innerHTML="";
  for(let i=0;i<120;i++){
    const d=document.createElement("div");
    d.className="raindrop";
    d.style.left=Math.random()*100+"%";
    d.style.animationDuration=.5+Math.random()+"s";
    rain.appendChild(d);
  }
}

/* FORECAST */
async function loadForecast(){
  try{
    const r=await fetch("https://api.weather.gov/gridpoints/LZK/36,91/forecast/hourly");
    const d=await r.json();
    forecast.innerHTML=d.properties.periods.slice(0,12)
      .map(p=>`<p>${p.startTime.slice(11,16)} — ${p.temperature}°F</p>`).join("");
  }catch{
    forecast.innerHTML="Forecast unavailable";
  }
}

/* INIT */
updateDayNight();
createStars();
startRain();
loadForecast();

setInterval(updateDayNight, 10000);
setInterval(loadForecast, 60000);
</script>

</body>
</html>
