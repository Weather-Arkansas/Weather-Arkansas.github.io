<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hourly Weather Forecast</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #eef6fc;
    color: #00334d;
    margin: 0;
    padding: 0;
}
header {
    background: teal;
    color: white;
    text-align: center;
    padding: 16px;
    font-size: 1.8em;
}
#forecast {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
    padding: 16px;
}
.hour-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    padding: 12px;
    width: 160px;
    text-align: center;
}
.hour-card .time {
    font-weight: bold;
    margin-bottom: 6px;
}
.hour-card .temp {
    font-size: 1.2em;
    margin: 4px 0;
}
.hour-card .cond {
    font-size: 0.9em;
    color: #444;
}
</style>
</head>
<body>

<header>Next 7 Days Hourly Forecast</header>

<div id="forecast">Loading forecast...</div>

<script>
async function fetchHourlyForecast(lat = 34.7465, lon = -92.2896) {
    try {
        // Step 1: get grid info
        const pointUrl = `https://api.weather.gov/points/${lat},${lon}`;
        const pointRes = await fetch(pointUrl);
        if(!pointRes.ok) throw new Error("Error fetching point data");
        const pointData = await pointRes.json();

        // Step 2: get the hourly forecast URL
        const hourlyUrl = pointData.properties.forecastHourly;

        // Step 3: fetch hourly forecast
        const forecastRes = await fetch(hourlyUrl);
        if(!forecastRes.ok) throw new Error("Error fetching hourly forecast");
        const forecastData = await forecastRes.json();

        // NOAA hourly forecast returns ~7 days (168 hours)
        const hours = forecastData.properties.periods.slice(0, 168);

        const container = document.getElementById('forecast');
        container.innerHTML = '';

        hours.forEach(hour => {
            const card = document.createElement('div');
            card.className = 'hour-card';
            const date = new Date(hour.startTime);
            const time = date.toLocaleString('en-US',{
                month:'short', day:'numeric', hour:'numeric', hour12:true
            });
            card.innerHTML = `
                <div class="time">${time}</div>
                <div class="temp">${hour.temperature}Â°${hour.temperatureUnit}</div>
                <div class="cond">${hour.shortForecast}</div>
            `;
            container.appendChild(card);
        });
    } catch(err){
        console.error(err);
        document.getElementById('forecast').innerHTML = "Unable to load forecast.";
    }
}

// Fetch on load
fetchHourlyForecast();
</script>

</body>
</html>
